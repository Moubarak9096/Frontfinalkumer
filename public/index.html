<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/assets/images/logo/Klumer_Logo_Orginal.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Klumer - Service de vote en ligne" />
    
    <!-- CSS ============================================ -->
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/vendor/slick.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/vendor/slick-theme.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/vendor/nice-select.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/plugins/feature.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/plugins/jquery-ui.min.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/vendor/odometer.css">
    <link rel="stylesheet" href="%PUBLIC_URL%/assets/css/style.css">
    
    <title>Klumer - Service de vote en ligne</title>
  </head>
  <body class="template-color-1">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- JS ============================================ -->
    <script src="%PUBLIC_URL%/assets/js/vendor/jquery.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/jquery.nice-select.min.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/jquery-ui.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/modernizer.min.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/feather.min.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/slick.min.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/bootstrap.min.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/sal.min.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/particles.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/jquery.style.swicher.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/js.cookie.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/count-down.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/isotop.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/imageloaded.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/odometer.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/jquery-appear.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/scrolltrigger.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/jquery.custom-file-input.js"></script>
    <script src="%PUBLIC_URL%/assets/js/vendor/savePopup.js"></script>

    <!-- Script personnalis√© pour le curseur -->
    <script src="%PUBLIC_URL%/assets/js/custom-cursor.js"></script>


    
    <!-- main JS -->
    <script src="%PUBLIC_URL%/assets/js/main.js"></script>

    <!-- Initialisation des animations et fonctionnalit√©s -->
    <script>
      // Initialisation apr√®s le chargement COMPLET
      window.addEventListener('load', function() {
        // Attendre que React ait fini de render
        setTimeout(function() {
          
          // 1. Initialiser les animations SAL (scroll animations)
          if (typeof sal !== 'undefined') {
            sal({
              threshold: 0.1,
              once: false,
            });
            console.log('‚úÖ Animations SAL initialis√©es');
          }

          // 2. Initialiser les particules SEULEMENT si l'√©l√©ment existe
          if (typeof particlesJS !== 'undefined') {
            const particlesElement = document.getElementById('particles-js');
            if (particlesElement) {
              particlesJS('particles-js', {
                particles: {
                  number: {
                    value: 40,
                    density: {
                      enable: true,
                      value_area: 1000
                    }
                  },
                  color: {
                    value: ["#7FC7BD", "#ffE7BD"]
                  },
                  shape: {
                    type: "circle",
                    stroke: {
                      width: 0,
                      color: "#000000"
                    },
                    polygon: {
                      nb_sides: 4
                    }
                  },
                  opacity: {
                    value: 0.8,
                    random: true,
                    anim: {
                      enable: false,
                      speed: 1,
                      opacity_min: 0.1,
                      sync: false
                    }
                  },
                  size: {
                    value: 3,
                    random: true,
                    anim: {
                      enable: false,
                      speed: 40,
                      size_min: 0.08,
                      sync: false
                    }
                  },
                  line_linked: {
                    enable: false,
                    distance: 150,
                    color: "#ffffff",
                    opacity: 0.4,
                    width: 1
                  },
                  move: {
                    enable: true,
                    speed: 4,
                    direction: "none",
                    random: false,
                    straight: false,
                    out_mode: "out",
                    attract: {
                      enable: false,
                      rotateX: 600,
                      rotateY: 1200
                    }
                  }
                },
                interactivity: {
                  detect_on: "canvas",
                  events: {
                    onhover: {
                      enable: true,
                      mode: "repulse"
                    },
                    onclick: {
                      enable: true,
                      mode: "push"
                    },
                    resize: true
                  },
                  modes: {
                    grab: {
                      distance: 400,
                      line_linked: {
                        opacity: 1
                      }
                    },
                    bubble: {
                      distance: 800,
                      size: 40,
                      duration: 2,
                      opacity: 8,
                      speed: 3
                    },
                    repulse: {
                      distance: 200
                    },
                    push: {
                      particles_nb: 4
                    },
                    remove: {
                      particles_nb: 2
                    }
                  }
                },
                retina_detect: true
              });
              console.log('‚úÖ Particles.js initialis√©');
            } else {
              console.log('‚ö†Ô∏è √âl√©ment particles-js non trouv√©');
            }
          }

          // 3. Initialiser Feather Icons
          if (typeof feather !== 'undefined') {
            feather.replace();
            console.log('‚úÖ Feather Icons initialis√©s');
          }

          // 4. Initialiser les s√©lecteurs nice-select
          if (typeof jQuery !== 'undefined' && jQuery().niceSelect) {
            jQuery('select').niceSelect();
            console.log('‚úÖ Nice Select initialis√©');
          }

          // 5. Initialiser Slick Carousel si pr√©sent
          if (typeof jQuery !== 'undefined' && jQuery().slick) {
            const sliders = document.querySelectorAll('.rn-slick-dot');
            if (sliders.length > 0) {
              jQuery('.rn-slick-dot').slick({
                dots: true,
                arrows: false,
                infinite: true,
                speed: 500,
                slidesToShow: 1,
                slidesToScroll: 1
              });
              console.log('‚úÖ Slick Carousel initialis√©');
            }
          }

          // 6. Back to Top personnalis√© (remplace le script probl√©matique)
          const backToTopElement = document.querySelector('.rn-progress-parent');
          if (backToTopElement) {
            backToTopElement.addEventListener('click', function() {
              window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            window.addEventListener('scroll', function() {
              if (window.scrollY > 300) {
                backToTopElement.style.opacity = '1';
                backToTopElement.style.visibility = 'visible';
              } else {
                backToTopElement.style.opacity = '0';
                backToTopElement.style.visibility = 'hidden';
              }
            });
            console.log('‚úÖ Back to Top initialis√©');
          }

          // 7. Curseur personnalis√©
          const cursorOuter = document.querySelector('.mouse-cursor.cursor-outer');
          const cursorInner = document.querySelector('.mouse-cursor.cursor-inner');
          if (cursorOuter && cursorInner) {
            document.addEventListener('mousemove', function(e) {
              cursorOuter.style.transform = `translate3d(calc(${e.clientX}px - 50%), calc(${e.clientY}px - 50%), 0)`;
              cursorInner.style.transform = `translate3d(calc(${e.clientX}px - 50%), calc(${e.clientY}px - 50%), 0)`;
            });
            console.log('‚úÖ Curseur personnalis√© initialis√©');
          }

          console.log('üöÄ Klumer - Toutes les fonctionnalit√©s initialis√©es avec succ√®s!');
          
        }, 1500); // D√©lai de 1.5 secondes pour laisser React charger compl√®tement
      });

      // Gestion des erreurs globales
      window.addEventListener('error', function(e) {
        console.warn('‚ö†Ô∏è Erreur JavaScript attrap√©e:', e.error);
      });
    </script>
  </body>
</html>